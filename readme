1. kubebuilder init --domain shimo.im --owner jude --repo github.com/haozi4263/etcd-operator

2. kubebuilder create api --group etcd --version v1alpha1 --kind EtcdCluster

3. make 重新生成资源清单
4. makr install 安装crd集群中
5. make run 运行contorller

make docker-build IMG=haozi4263/etcd-operator-cluster:v1
make docker-push IMG=haozi4263/etcd-operator-cluster:v1

backup:
    kubebuilder create api --group etcd --version v1alpha1 --kind EtcdBackup
    but was required as: github.com/coreos/bbolt: etcd和grpc版本不匹配
        go mod edit -replace github.com/coreos/bbolt@v1.3.4=go.etcd.io/bbolt@v1.3.4
        go mod edit -replace google.golang.org/grpc@v1.29.1=google.golang.org/grpc@v1.26.0


    make docker-build IMG=haozi4263/etcd-operator-backup:v1
    make docker-push IMG=haozi4263/etcd-operator-backup:v1
    docker build --target backup -t etcd-operator-backup:v0.0.1 .





replace (
	github.com/coreos/bbolt => go.etcd.io/bbolt v1.3.5
	github.com/coreos/etcd => github.com/coreos/etcd v3.3.20+incompatible
	google.golang.org/grpc => google.golang.org/grpc v1.26.0
)

